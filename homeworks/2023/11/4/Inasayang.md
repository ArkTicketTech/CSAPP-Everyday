异常控制流 Exceptional Control Flow ECF

硬件层，硬件检测事件会触发控制突然转义到异常处理程序

操作系统曾，内核通过上下文切换将控制从一个用户进程转移到另一个用户进程

应用层，一个进程可以发送信号到另一个进程，接收者将控制突然转移到一个信号处理程序

一个程序通过回避通常的栈规则，执行到其他函数中任意位置的非本地跳转

应用程序通过使用叫陷阱trap或系统调用system call的ECF形式，向操作系统请求服务

软件异常运行程序进行非本地跳转（位反通常的调用或返回栈规则的跳转）来相应错误情况

非本地跳转是应用层ECF，C中通过setjump和longjmp函数提供



异常

异常是异常控制流的一种形式，由硬件和操作系统实现

异常时控制流中的突变，响应处理器状态中的变化

处理器检测事件发生，通过叫异常表的跳转表，进行间接过程调用，到异常处理程序（操作系统子程序）



异常处理

系统中每种类型的异常都分配了一个唯一的非负整数的异常号，由处理器的设计者和操作系统内核的设计者分配

-   处理器，被零除，缺页，内存访问违例，断点，算术运算溢出
-   操作系统，系统调用，外部IO设备信号

系统启动时，操作系统分配和初始化叫异常表的跳转表

异常号是异常表中的索引

异常表的起始地址在叫异常表基址寄存器的特殊CPU寄存器里



Pp. 500-504