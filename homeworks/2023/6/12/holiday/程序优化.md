程序优化的主要措施有:

1. 增强空间局部性:这是最重要的优化方法。常用技术有:(1) 使用连续性数据结构:如数组而非链表,使数据连续存储(2) 拆分结构体:将最有可能一起访问的成员尽量集中 (3) 展开循环:生成更长的连续代码与数据访问序列 (4) 使用块操作:在循环中以块的方式访问数组,增大每个操作的数据量(5) 按空间局部性组织数据:将最有可能被一起访问的数据存储在一起

2. 增强时间局部性:  通过数据与指令的重用增加它们被多次访问的机会。常用技术有:(1) 复用变量:在循环/函数中尽量复用相同的变量,而非每次新建变量 (2) 增大循环展开因子:每次展开更长的循环体,避免频繁跳转 (3) 函数内联:将短小函数内联到调用点,避免调用开销 (4) 循环不变移:将不随迭代变化的计算移到循环外进行,避免重复计算

3. 其他方法:(1) 将频繁使用的数据保存在寄存器中:直接被CPU访问,完全免除访问开销 (2) 避免访问大数组:在内循环中访问大数组会产生大量缓存未命中 (3) 使用缓存一致性高效的访问方式:在多核环境下,优化缓存同步性能 (4) 选用合适的算法与数据结构:不同的算法/数据结构有差异的空间局部性与计算复杂度(5) 编译器优化:编译器可以自动进行一定程度的循环展开、常量传播、 dead code消除等优化(6) 代码重构:改变原有代码结构,使之更易于被编译器分析与优化(7) 重载运算符:使标准操作(如+、-)在自定类型上产生更高效的实现