![image-20230611224203383](https://typra-pictures.oss-cn-beijing.aliyuncs.com/imgs/image-20230611224203383.png)



计算机的存储系统就是多层次缓存的结构。





`cpu` 是如何通过主线访问内存的。这些步骤叫做总线事务。其中包括，

- 读事务：从主存传输数据到`cpu`中的寄存器中。
- 写事务：从`cpu` 的寄存器传输数据到主存中。



总线可以进行双向通信，具体如何进行通信需要一个设备控制通信，所以每个输入输出的。

1. 设备地址和寻址：每个 I/O 设备在系统中都有一个唯一的地址或标识符，用于确定设备在总线上的位置。系统使用这些地址来选择要与之通信的特定设备。通过指定设备地址，系统可以确保数据被传输到正确的设备。
2. 控制信号和命令：总线上的控制信号和命令用于与 I/O 设备进行交互和控制。这些信号包括读、写、启动传输、停止传输等。通过发送适当的控制信号和命令，系统可以指示 I/O 设备执行相应的操作，例如从设备读取数据或将数据写入设备。
3. 数据传输协议：系统和 I/O 设备之间必须约定一种数据传输协议，以确保数据能够正确传输和解释。这可能包括数据帧的格式、同步机制、错误检测和纠正等。通过遵循协议，系统和设备可以协调传输的数据，以确保数据在总线上按照预期的方式传输到对应位置。
4. DMA（直接内存访问）：DMA 是一种技术，允许 I/O 设备直接访问系统内存，而不需要 CPU 的干预。通过使用 DMA 控制器，I/O 设备可以将数据直接传输到或从系统内存中，而无需通过 CPU 进行数据传输。这样可以提高数据传输的效率和速度。

通过以上机制和技术，I/O 设备可以保证数据通过总线传输到对应的位置。设备地址和寻址确保数据传输到正确的设备，控制信号和命令允许系统与设备进行交互和控制，数据传输协议确保数据按照约定的格式进行传输，而 DMA 技术可以提高数据传输的效率。综合利用这些机制，系统和 I/O 设备能够协同工作，确保数据顺利传输到正确的位置