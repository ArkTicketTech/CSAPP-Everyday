上一节，我们聊到了很多硬件的功能，软件不能直接访问系统资源，只能通过操作系统访问硬件的功能，换个角度，也就是所有软件都是建立系统之上

![image-20230424223905434](https://typra-pictures.oss-cn-beijing.aliyuncs.com/imgs/image-20230424223905434.png)

这样的好处是，防止软件肆意调用硬件功能，也可以将硬件的功能抽象出来，软件不需要实现复杂的硬件原理。

一个单核 `cpu` 同一时刻只能运行一个进程，通过上下文切换的，让我们感觉它好像在同时运行多个进程，多个进程在进行上下文切换的时候，需要消耗资源，主要消耗哪些方面的资源呢

![image-20230424225519103](https://typra-pictures.oss-cn-beijing.aliyuncs.com/imgs/image-20230424225519103.png)

`cpu` 只能处理寄存器文件中的数据，也就是`L0` 基本的存储，但是不同的进程中包含的程序和数据是不同的，所以上下文切换的过程中，需要把数据从较慢的存储器向更快的数据上，这个过程就是上下文切换进行的资源消耗。



### 进程和线程

线程是微缩版的进程，在单核计算机中，多个进程共用同一个`cpu`的所有使用时间，每个进程占用了一个 `cpu` 的一部分时间片，一个进程中的多个线程又同时共享这个进程占有 `cpu` 的时间片，相当于降低了颗粒度。不过线程之间通信相比进程之间通信要容易的多，后面再看。

### 虚拟内存

这是一个计算机操作系统中的一个非常常见的概念，简单来说就是将内存中一部分数据放到磁盘中，当需要的时候再加载到内存中，根据一些机制，将数据从内存放到磁盘中。详情后面在接触的时候再讲解。
### 数据从磁盘加载到内存的过程，cpu 起着什么作用
1. 执行指令：CPU 根据运行的程序执行相应的指令，这些指令告诉 CPU 如何从磁盘读取数据并将其加载到内存中。这些指令包括文件路径、数据大小等信息。
2. 控制数据传输：CPU 通过与磁盘控制器和内存控制器进行通信，控制数据在磁盘和内存之间的传输。它会发出读取请求，并在数据传输完成后收到确认信号。
3. 协调各个部件：在整个数据读取过程中，CPU 需要协调各个硬件部件（如磁盘、内存、总线等）的工作，确保它们能够高效地协同工作。
