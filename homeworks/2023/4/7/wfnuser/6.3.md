- # 6.3 The Memory Hierarchy  
	- Storage technology  
		- 不同的存储技术的访问时间差距很大；CPU和主存之间的差距越来越大  
	- Computer software  
		- 好的程序应该利用好局部性  
	- ![image.png](../assets/image_1680936225197_0.png)  
	- 上述两个性质在计算机中正好可以互补 -> 我们很容易构造出有层次的存储结构 在计算机中广为应用  
	- ## 6.3.1 Caching in the Memory Hierarchy  
		- k 层的存储通常作为 k + 1 层存储的缓存 cache  
		- ![image.png](../assets/image_1680936864329_0.png)  
		- 层与层之间交换数据以固定大小的block为单位 但是不同层之间采用的block size可以不同  
		- ### cache hits  
			- 如果数据在k层已经存在，则不用访问k+1层 缓存命中  
		- ### cache misses  
			- k层不存在数据，则称为 miss 通常是因为被其他块覆写了  
			- overwriting 的逻辑被称为 replacing 或者 evicting  
				- LRU是一种常见的策略  
		- ### kind of cache misses  
			- miss分为很多种  
				- cold miss - k层cache为空 此时我们也可称 cache 为 cold cache  
				- conflict miss - 采用一些更严格的替换策略时，即使缓存还有空间，但是由于严格的映射关系，导致替换，产生的miss  
				- capacity miss - 就是缓存大小不够用了  
			- ![image.png](../assets/image_1680937549175_0.png)  
		- ### cache management  
			- register file 由编译器管理 loads指令在miss的时候被发出  
			- L1 L2 L3 cache 由硬件管理  
			- DRAM 由操作系统和 address translation 硬件共同管理  
			- 对于分布式存储系统来说 local disk 作为远程存储的缓存，比如在AFS场景下，由 AFS client 管理  
			- 通常，缓存的逻辑不需要用户程序采取明确的指令  