# 操作系统如何管理硬件
## 1. 操作系统的作用
操作系统，是应用软件和硬件之间插入的一层软件，应用软件不能直接访问硬件，所有操作都必须通过操作系统。
操作系统的两个功能：
1. 防止硬件被应用软件滥用
2. 向应用软件提供简单一致的抽象（进程、虚拟内存、文件）来使用硬件
----------------------------------
|进程                            | 
|         | 虚拟内存|            |
|         |        |   文件      |
|  处理器 |  主存   |    I/O设备  |

## 2. 三个抽象
### 2.1 进程
进程：对正在运行程序的抽象。
假象：系统中只有这个程序在运行，程序独占处理器、主存、CPU。
以单核系统为例，在任一时刻，CPU都只能执行一个程序，但是给人的感觉是，多个程序可以同时执行。这样的原因是，CPU可以在不同的进程间切换，这种机制叫上下文切换。
上下文，是进程运行所需的所有状态信息。操作系统在进行进程切换时，会保存当前执行进程的上下文，恢复下个要执行的进程的上下文，然后把控制权交给要执行的进程。
### 2.2 线程
线程，即是进程的组成单元，它运行在进程的上下文里，共享同样的代码和全局数据。
## 2.3 虚拟内存
假象：每个进程都在独占使用主存。
虚拟内存中分为各个区。
虚拟内存的基本思想：把一个进程虚拟内存的内容存储在磁盘上，然后用主存作为磁盘的高速缓存。
## 2.4 文件
文件就是字节序列，一切皆文件，因为所有输入输出都是由一组Unix I/O的系统函数调用读写文件实现的。文件为应用程序提供了一个统一的视图，编写程序的程序员无需了解不同的硬盘技术，一份程序可以在不同的硬盘上运行。
