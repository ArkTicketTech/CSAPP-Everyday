- # 11.1 The Client-Server Programming Model 954  
	-  
- # 11.2 Networks 955  
	- 从网络上接收到的数据从适配器经过 I/O 和内存总线复制到内存，通常是通过 DMA 传送。相似地，数据也能从内存复制到网络。  
	- 一台主机是如何通过网络和另一台主机通信的？  
		- 1.运行在主机 A 上的客户端进行一个系统调用，从客户端的虚拟地址空间复制数据到内核缓冲区中。  
		- 2.主机 A 上的协议软件通过在数据前附加互联网络包头和 LAN1 帧头，创建了一个 LAN1 的帧。互联网络包头寻址到互联网络主机 B。LAN1 帧头寻址到路由器。然后它传送此帧到适配器。注意，LAN1 帧的有效载荷是一个互联网络包，而互联网络包的有效载荷是实际的用户数据。这种封装是基本的网络互联方法之一。  
		- 3.LAN1 适配器复制该帧到网络上。  
		- 4.当此帧到达路由器时，路由器的 LAN1 适配器从电缆上读取它，并把它传送到协议软件。  
		- 5.路由器从互联网络包头中提取出目的互联网络地址，并用它作为路由表的索引，确定向哪里转发这个包，在本例中是 LAN2。路由器剥落旧的 LAN1 的帧头，加上寻址到主机 B 的新的 LAN2 帧头，并把得到的帧传送到适配器。  
		- 6.路由器的 LAN2 适配器复制该帧到网络上。  
		- 7.当此帧到达主机 B 时，它的适配器从电缆上读到此帧，并将它传送到协议软件。  
		- 8.最后，主机 B 上的协议软件剥落包头和帧头。当服务器进行一个读取这些数据的系统调用时，协议软件最终将得到的数据复制到服务器的虚拟地址空间。  
	-  
- # 11.3 The Global IP Internet 960  
	- 一个连接是如何由两端的套接字地址唯一确定？ #card #[[computer science]]  
		- (cliaddr:cliport, servaddr:servport)  
		- 当客户端发起一个连接请求时，客户端套接字地址中的端口是由内核自动分配的，称为**临时端口**（ephemeral port）.然而，服务器套接字地址中的端口通常是某个**知名端口**，是和这个服务相对应的。  
	-  
- # 11.4 The Sockets Interface 968  
	- socket  
		- 客户端和服务器使用 socket 函数来创建一个**套接字描述符**（socket descriptor）  
	- connect  
		- 客户端通过调用 connect 函数来建立和服务器的连接。  
		- connect 函数试图与套接字地址为 addr 的服务器建立一个因特网连接，其中 addrlen 是 **sizeof(sockaddr_in)**。connect 函数会阻塞，一直到连接成功建立或是发生错误。如果成功，clientfd 描述符现在就准备好可以读写了.  
	- bind  
		- bind 函数告诉内核将 addr 中的服务器套接字地址和套接字描述符 sockfd 联系起来。  
	- listen  
		- listen 函数将 sockfd 从一个主动套接字转化为一个**监听套接字**（listening socket），该套接字可以接受来自客户端的连接请求。  
	- accept  
		- accept 函数等待来自客户端的连接请求到达侦听描述符 listenfd，然后在 addr 中填写客户端的套接字地址，并返回一个**已连接描述符**（connected descriptor），这个描述符可被用来利用 Unix I/O 函数与客户端通信。  
- # 11.5 Web Servers 984  
- # 11.6 Putting It Together: The Tiny Web Server 992  
- # 11.7 Summary 1000  