2022 0505

**Linux虚拟内存系统**：Linux为每一个进程维护了一个单独的虚拟地址空间。

分为两部分：进程虚拟内存和内核虚拟内存。

内核虚拟内存里面有两种数据：

对每一个进程都不同的数据：例如页表，task，mm，内核栈

对每一个进程相同的数据：内核代码和数据

用户虚拟内存中有用户栈，运行时堆,`.bss`,`.data`,`.text`段

**共享对象：**

每一个程序都需要printf，那么如果每一个进程都在物理内存里面保持一个副本，则浪费。

但我们有共享对象技术。可以让两个进程里面的虚拟地址映射到同一个物理地址。

私有对象用**写时复制**技术来节省内存

A，B进程都映射了私有的对象。此时物理内存里面还是只有一份。而如果任何一个进程试图写该对象，则复制一份给他写。

