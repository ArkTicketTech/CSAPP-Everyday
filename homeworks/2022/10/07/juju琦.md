### 共享文件

内核用3个相关的数据结构来表示打开的文件：

1. 描述符表。 每个进程都有它独立的描述符表，它的表项是由进程打开的文件描述符来索引的。 每个打开的描述符表项指向文件表的一个表项。  
    
2. 文件表。    打开文件的集合是由一张文件表来表示的，所有的进程共享这张表。  每个文件表的表项组成包括当前的文件位置、引用计数，以及指向v-node表的一个指针。关闭一个描述符会减少引用计数。
    
3. v-node表。 和文件表一样，所有的进程共享这张v-node表。每个表项包含stat结构中的大多数信息。
