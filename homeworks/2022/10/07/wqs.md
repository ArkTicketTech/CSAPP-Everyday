## P161-165

switch语句：通过跳转表来访问代码位置。GCC支持计算goto（computed goto），是对C语言的拓展。“.rodata”（只读数据，Read-Only Data）

## 3.7 过程

设计良好的软件用过程作为抽象机制，隐藏某个行为的具体实现，同时又提供清晰简洁的接口定义。不同编程语言中，过程的形式多种多样：函数、方法、子例程、处理函数等。

提供对过程的机器级支持，必须要处理许多不同的属性，P、Q两种程序：

**传递控制**（进入Q，程序计数器必须设置为Q代码起始地址，返回时要把程序计数器设置为P中调用Q后面的那条指令的地址）

**传递数据**（P能够对Q提供多个参数，Q必须能够为P返回一个值）

**分配和释放内存**（开始时，Q可能需要为局部变量分配空间，在返回前，必须释放这些存储空间最低要求策略方法，尽可能减小过程调用开销，实现上述机制中每个过程所必须的那些。

### 3.7.1 运行时栈

C语言过程调用机制在于使用了栈数据结构提供的后进先出的内存管理原则。P调用Q时，控制和数据信息放到栈尾，P返回时，信息会释放。

x86-64的栈向**低地址**方向增长。%RSP指向栈顶，减少栈指针可以为没有指定初值的数据在栈上分配空间，增加栈指针来释放空间。

x86-64需要的存储空间超出了寄存器能存放的大小时，会分配栈空间，即栈帧。如下图。

![image](https://user-images.githubusercontent.com/80054116/194714227-e53ddf62-42b8-4de8-b033-d3dc73242fde.png)

栈：传递参数、存储返回信息、保存寄存器、局部存储。为了提高效率，x86-64只分配所需栈帧。许多过程有6个或更少的参数，所有参数都可通过寄存器传递。
